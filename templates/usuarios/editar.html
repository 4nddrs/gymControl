{% extends "base.html" %}

{% block title %}Editar {{ usuario.nombre }} {{ usuario.apellido }} - VITO'S GYM{% endblock %}

{% block content %}
<div class="page-header">
    <h2>‚úèÔ∏è Editar Usuario</h2>
    <a href="{{ url_for('usuarios.detalle', usuario_id=usuario._id) }}" class="btn btn-secondary">‚Üê Volver</a>
</div>

<div class="content-section" style="max-width: 800px; margin: 0 auto;">
    <form method="POST" action="{{ url_for('usuarios.editar', usuario_id=usuario._id) }}">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
            <!-- Nombre -->
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Nombre <span style="color: var(--danger-color);">*</span>
                </label>
                <input type="text" 
                       name="nombre" 
                       value="{{ usuario.nombre }}" 
                       required
                       style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 6px; font-size: 1rem;">
            </div>

            <!-- Apellido -->
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Apellido <span style="color: var(--danger-color);">*</span>
                </label>
                <input type="text" 
                       name="apellido" 
                       value="{{ usuario.apellido }}" 
                       required
                       style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 6px; font-size: 1rem;">
            </div>

            <!-- C√≥digo -->
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    C√≥digo
                </label>
                <input type="text" 
                       name="codigo" 
                       value="{{ usuario.get('codigo', '') }}" 
                       placeholder="Ej: ABC123"
                       style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 6px; font-size: 1rem;">
            </div>

            <!-- Departamento -->
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Departamento
                </label>
                <select name="departamento_id" 
                        style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 6px; font-size: 1rem;">
                    <option value="">Seleccionar...</option>
                    {% for depto in departamentos %}
                    <option value="{{ depto._id }}" {% if usuario.get('departamento_id') == depto._id|string %}selected{% endif %}>
                        {{ depto.nombre }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            <!-- Tipo Documento -->
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Tipo de Documento
                </label>
                <select name="tipo_documento" 
                        style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 6px; font-size: 1rem;">
                    <option value="DNI" {% if usuario.get('tipo_documento') == 'DNI' %}selected{% endif %}>DNI</option>
                    <option value="Pasaporte" {% if usuario.get('tipo_documento') == 'Pasaporte' %}selected{% endif %}>Pasaporte</option>
                    <option value="C√©dula" {% if usuario.get('tipo_documento') == 'C√©dula' %}selected{% endif %}>C√©dula</option>
                </select>
            </div>

            <!-- N√∫mero Documento -->
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    N√∫mero de Documento
                </label>
                <input type="text" 
                       name="numero_documento" 
                       value="{{ usuario.get('numero_documento', '') }}"
                       style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 6px; font-size: 1rem;">
            </div>

            <!-- Fecha Nacimiento -->
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Fecha de Nacimiento
                </label>
                <input type="date" 
                       name="fecha_nacimiento" 
                       value="{{ usuario.fecha_nacimiento.strftime('%Y-%m-%d') if usuario.get('fecha_nacimiento') else '' }}"
                       style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 6px; font-size: 1rem;">
            </div>

            <!-- G√©nero -->
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    G√©nero
                </label>
                <select name="genero" 
                        style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 6px; font-size: 1rem;">
                    <option value="">Seleccionar...</option>
                    <option value="M" {% if usuario.get('genero') == 'M' %}selected{% endif %}>Masculino</option>
                    <option value="F" {% if usuario.get('genero') == 'F' %}selected{% endif %}>Femenino</option>
                    <option value="Otro" {% if usuario.get('genero') == 'Otro' %}selected{% endif %}>Otro</option>
                </select>
            </div>

            <!-- Email -->
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Email
                </label>
                <input type="email" 
                       name="email" 
                       value="{{ usuario.get('email', '') }}"
                       style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 6px; font-size: 1rem;">
            </div>

            <!-- Tel√©fono -->
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Tel√©fono
                </label>
                <input type="tel" 
                       name="celular" 
                       value="{{ usuario.get('celular', '') }}"
                       style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 6px; font-size: 1rem;">
            </div>

            <!-- Fecha Inicio Membres√≠a -->
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Fecha Inicio Membres√≠a
                </label>
                <input type="date" 
                       name="fecha_inicio" 
                       value="{{ usuario.fecha_inicio.strftime('%Y-%m-%d') if usuario.get('fecha_inicio') else '' }}"
                       style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 6px; font-size: 1rem;">
            </div>

            <!-- Fecha Fin Membres√≠a -->
            <div>
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Fecha Fin Membres√≠a
                </label>
                <input type="date" 
                       name="fecha_fin" 
                       value="{{ usuario.fecha_fin.strftime('%Y-%m-%d') if usuario.get('fecha_fin') else '' }}"
                       style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 6px; font-size: 1rem;">
            </div>

            <!-- Direcci√≥n -->
            <div style="grid-column: 1 / -1;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: bold;">
                    Direcci√≥n
                </label>
                <input type="text" 
                       name="direccion" 
                       value="{{ usuario.get('direccion', '') }}"
                       style="width: 100%; padding: 0.75rem; border: 2px solid var(--border-color); border-radius: 6px; font-size: 1rem;">
            </div>

            <!-- Estado -->
            <div style="grid-column: 1 / -1;">
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                    <input type="checkbox" 
                           name="activo" 
                           value="true"
                           {% if usuario.get('activo', True) %}checked{% endif %}
                           style="width: 20px; height: 20px; cursor: pointer;">
                    <span style="font-weight: bold;">Usuario Activo</span>
                </label>
            </div>
        </div>

        <!-- Botones -->
        <div style="margin-top: 2rem; display: flex; gap: 1rem; justify-content: flex-end;">
            <a href="{{ url_for('usuarios.detalle', usuario_id=usuario._id) }}" class="btn btn-secondary">
                Cancelar
            </a>
            <button type="submit" class="btn btn-primary">
                üíæ Guardar Cambios
            </button>
        </div>
    </form>
</div>
{% endblock %}
